---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");

let categories = [
  ...new Set(
    posts
      .map(p => p.data.category)
      .filter(Boolean)
      .map(c => c.trim())
  ),
];
if (categories.length === 0) categories = ["Blog"];

const labels = {
  en: { title: "Categories" },
  es: { title: "Categorías" },
  pt: { title: "Categorias" },
};

const lang = "pt"; // “en”, “es” ou “pt”
const L = labels[lang] || labels.en;
---

<Base title={L.title}>
  <section style="padding: 3rem 1rem; text-align: center;">
    <h1 style="font-size: 2.2rem; font-weight: 700;">{L.title}</h1>
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin-top: 2rem;">
      {categories.map(cat => (
        <a
          href={`/categories/${cat.toLowerCase().replace(/\s+/g, "-")}/`}
          style="background: var(--accent); color: white; padding: 0.6rem 1.2rem; border-radius: 6px; text-decoration: none; font-weight: 600;"
        >
          {cat}
        </a>
      ))}
    </div>
  </section>
</Base>
